!function(t,e){if(void 0===JGDatasetUI)return void console.error("can't not initialize JGDatasetSumUI, JGDatasetUI not found");t._JGKeyword=e.extend(t._JGKeyword,{sumui:{trigger:{refresh:"jgdatasetsumui"}}});var r=t.JGDatasetSumUI=function(t,r){this._element=t,this._datasetName=NVL(r,t.attr(_JGKeyword.ui.attrDataset)),this._FXElements=new Array;var a=this._element.find("*");a.push(this._element);for(var i=a.length,n=0;i>n;++n){for(var s=e(a[n]),o=s[0].attributes,d=o.length,u=0;d>u;++u){var _=o[u],g=_.name.toLowerCase();_.name.toLowerCase()!==_JGKeyword.ui.attrColumn&&0===BLK(_.value).replaceBlank("").indexOf(_JGKeyword.ui.keyFXPrefix)&&this._FXElements.push(new JGFXElement(s,g,0))}var h=s.html();0===BLK(h).replaceBlank("").indexOf(_JGKeyword.ui.keyFXPrefix)&&this._FXElements.push(new JGFXElement(s,null,1))}var m=this;e(this.dataset()).on(_JGKeyword.trigger._rowInserted+" "+_JGKeyword.trigger._rowRemoved+" "+_JGKeyword.trigger._rowMoved+" "+_JGKeyword.trigger._columnAdded+" "+_JGKeyword.trigger._columnRemoved+" "+_JGKeyword.trigger._columnValueChanged+" "+_JGKeyword.trigger._datasetClear+" "+_JGKeyword.trigger._datasetReset+" "+_JGKeyword.trigger._datasetChanged+" "+_JGKeyword.trigger._datasetSorted+" "+_JGKeyword.trigger._datasetApply,function(t){m.refresh()}),this._refresh()};r.prototype.element=function(){return this._element},r.prototype.datasetName=function(){return this._datasetName},r.prototype.dataset=function(){return JGDS("dataset",this._datasetName)},r.prototype.FXElements=function(){return this._FXElements},r.prototype.refresh=function(){this._refresh(),this._element.trigger(_JGKeyword.sumui.trigger.refresh)},r.prototype._refresh=function(){for(var t=this.FXElements(),e=this.dataset(),r=t.length,a=0;r>a;++a)t[a].update(e)},e.fn._jgDatasetSumUI=function(t){return void 0!==t&&this.data("jgdatasetJGDatasetSumUI",t),this.data("jgdatasetJGDatasetSumUI")},e.fn._jgDatasetSumUIInitialized=function(t){return void 0!==t&&this.data("jgdatasetJGDatasetSumUIInitialized",t),NVL(this.data("jgdatasetJGDatasetSumUIInitialized"),!1)},e.fn.JGDatasetSumUI=function(){return this._jexecute(function(t){return this._jgDatasetSumUIInitialized()||(this._jgDatasetSumUI(new r(this,t[0])),this._jgDatasetSumUIInitialized(!0)),JGSelector(this._jgDatasetSumUI(),t)},arguments)}}(window,jQuery);